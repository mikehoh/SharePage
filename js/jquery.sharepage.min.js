/* SharePage 1.0.3 by Michael Hohlovich */
!function(t){var e=function(e){return this.each(function(){var n=t.extend({networks:["linkedin","facebook","twitter","googleplus"],url:window.location.href,title:"",source:"",width:500,height:500,design:"buttons"},e),o=f(n.networks);o.length>0&&(w(o,n.url),g(o,n.url,n.title,n.source,n.width,n.height));var r;switch(n.design){case"buttons":r="share-buttons";break;case"links":r="share-links";break;case"icons":r="share-icons";break;default:r=""}t(this).addClass("share-page").addClass(r).html(o)})},n=function(){return this.each(function(){t(this).find(".network").each(function(e,n){t(n).off("click")}),t(this).empty()})},o={init:e,destroy:n};t.fn.sharepage=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.SharePage"):o.init.apply(this,arguments)};var r=function(e,n){t.ajax({url:"https://www.linkedin.com/countserv/count/share?url="+encodeURIComponent(e)+"&format=jsonp",dataType:"jsonp",success:function(t){t?n(t.count):this.error()},error:function(t,e){n("")}})},a=function(t,e,n){return"http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(t)+"&title="+encodeURIComponent(n)+"&source="+encodeURIComponent(e)},c=function(e,n){var o="SELECT url, normalized_url, share_count, like_count, comment_count, total_count, commentsbox_count, comments_fbid, click_count FROM link_stat WHERE url = '"+e+"'";t.ajax({url:"https://api.facebook.com/method/fql.query?format=json&query="+encodeURIComponent(o),success:function(t){t[0]?n(t[0].total_count):this.error()},error:function(t,e){n("")}})},s=function(t,e,n){return"http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(t)+"&t="+encodeURIComponent(n)},i=function(t,e,n){return"http://www.twitter.com/intent/tweet?url="+encodeURIComponent(t)+"&via="+encodeURIComponent(e)+"&text="+encodeURIComponent(n)};window.VK={};var u=function(e,n){window.VK.Share={count:function(t,e){n(e)}},t.ajax({url:"https://vkontakte.ru/share.php?act=count&index=1&url="+encodeURIComponent(e),dataType:"jsonp"}).done(function(t){})},l=function(t,e,n){return"http://vk.com/share.php?url="+encodeURIComponent(t)},h=function(e,n){var o={method:"pos.plusones.get",id:e,params:{nolog:!0,id:e,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"};t.ajax({type:"POST",url:"https://clients6.google.com/rpc",processData:!0,contentType:"application/json",data:JSON.stringify(o),success:function(t){n(t.result.metadata.globalCounts.count)},error:function(){n("")}})},p=function(t,e,n){return"http://plus.google.com/share?url="+encodeURIComponent(t)},d={linkedin:{name:"LinkedIn",counter:!0,getShares:r,shareUrl:a},facebook:{name:"Facebook",counter:!0,getShares:c,shareUrl:s},twitter:{name:"Twitter",counter:!1,shareUrl:i},googleplus:{name:"Google Plus",counter:!0,getShares:h,shareUrl:p},vk:{name:"ВКонтакте",counter:!0,getShares:u,shareUrl:l}},f=function(t){var e=[];return t.forEach(function(t,n){d[t]&&e.push(m(t))}),e},m=function(e){var n=t("<div class='network' />").addClass(e).attr("data-network",e),o=t("<span class='title' />").text(d[e].name);if(n.html(o),d[e].counter){var r=t("<span class='counter' />").text(0);n.append(r)}return n},w=function(t,e){t.forEach(function(t,n){var o=t.data("network");"function"==typeof d[o].getShares&&d[o].getShares(e,function(e){t.find(".counter").html(k(e))})})},g=function(t,e,n,o,r,a){t.forEach(function(t,c){var s=t.data("network"),i=d[s].shareUrl(e,o,n);t.on("click",function(t){window.open(i,"","menubar=no, toolbar=no, resizable=yes, scrollbars=yes, width="+r+", height="+a)})})},k=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}(jQuery);
